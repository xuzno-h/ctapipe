

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Camera Geometries &mdash; ctapipe v0.6.2.post178+git78208d1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Optics Description" href="optics.html" />
    <link rel="prev" title="Telescope Description" href="telescope.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> ctapipe
          

          
          </a>

          
            
            
              <div class="version">
                0.6.2.post178+git78208d1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html">Analysis (<code class="xref py py-obj docutils literal notranslate"><span class="pre">analysis</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../calib/index.html">Calibration (<code class="xref py py-obj docutils literal notranslate"><span class="pre">calib</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coordinates/index.html">Coordinates (<code class="xref py py-obj docutils literal notranslate"><span class="pre">coordinates</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Core Structures and Base Classes (<code class="xref py py-obj docutils literal notranslate"><span class="pre">core</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../image/index.html">Imaging (<code class="xref py py-obj docutils literal notranslate"><span class="pre">image</span></code>)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Instrument (<code class="xref py py-obj docutils literal notranslate"><span class="pre">instrument</span></code>)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#hierarchy-of-instrumentdescription-classes">Hierarchy of InstrumentDescription Classes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="subarray.html">Subarray Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="telescope.html">Telescope Description</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Camera Geometries</a></li>
<li class="toctree-l4"><a class="reference internal" href="optics.html">Optics Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#other-instrumental-data">Other Instrumental Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#reference-api">Reference/API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../io/index.html">Input/Output (<code class="xref py py-obj docutils literal notranslate"><span class="pre">io</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reco/index.html">Reconstruction (<code class="xref py py-obj docutils literal notranslate"><span class="pre">reco</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/index.html">Command line tools (<code class="xref py py-obj docutils literal notranslate"><span class="pre">tools</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">Utilities (<code class="xref py py-obj docutils literal notranslate"><span class="pre">utils</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visualization/index.html">Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">visualization</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ctapipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Docs</a> &raquo;</li>
        
          <li><a href="index.html">Instrument (<code class="xref py py-obj docutils literal notranslate"><span class="pre">instrument</span></code>)</a> &raquo;</li>
        
      <li>Camera Geometries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/ctapipe_api/instrument/camera.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="camera-geometries">
<span id="id1"></span><h1>Camera Geometries<a class="headerlink" href="#camera-geometries" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> provides an easy way to work with images or data
cubes related to Cherenkov Cameras.  In <em>ctapipe</em>, a camera image is
simply a flat 1D array (or 2D if time information is included), where
there is one value per pixel. Of course, to work with such an array,
one needs spatial information about how the pixels are laid out.
Since CTA has at least 6 different camera types, and may have multiple
versions of each as revisions are made, it is necessary to have a
common way to describe all cameras.</p>
<p>So far there are several ways to construct a <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a>:</p>
<ul class="simple">
<li><p>use the <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> constructor, where one has to specify all
necessary information (pixel positions, types, areas, etc)</p></li>
<li><p>use <code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry.from_name(telescope,</span> <span class="pre">revision)</span></code> (ex: <code class="xref py py-obj docutils literal notranslate"><span class="pre">geom</span> <span class="pre">=</span>
<span class="pre">CameraGeometry.from_name('HESS',1)</span></code>).  This reads the telescope def
from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">$CTAPIPE_EXTRA</span></code> directory, and so far we only have HESS
telescopes there (more to come)</p></li>
<li><p>load a Monte-Carlo file, get the list of pixel X and Y positions and
the telescope focal length and use
<code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry.guess(x,y,flen)</span></code> - this will work for all telescopes
in CTA so far</p></li>
<li><p>load it from a pre-written file (which can be in any format
supported by <a class="reference external" href="http://docs.astropy.org/en/latest/table/index.html#module-astropy.table" title="(in Astropy v3.2.dev1174)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table</span></code></a>, as long as that format allows for
header-keywords as well as table entries.</p></li>
</ul>
<p>Once loaded, the <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> object gives you access the pixel
positions, areas, neighbors, and shapes.  Since the geometries are
cached in the class, subsequent calls to <code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry.guess()</span></code> will
return the same object if the inputs are the same, and are thus
speed-efficient.</p>
<p><a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> is used by most image processing algorithms in the
<a class="reference internal" href="../image/index.html#module-ctapipe.image" title="ctapipe.image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctapipe.image</span></code></a> module, as well as displays in the
<a class="reference internal" href="../visualization/index.html#module-ctapipe.visualization" title="ctapipe.visualization"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctapipe.visualization</span></code></a> module.</p>
<div class="section" id="input-output">
<h2>Input/Output<a class="headerlink" href="#input-output" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>You can write out a <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> by using the <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry.to_table" title="ctapipe.instrument.CameraGeometry.to_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry.to_table()</span></code></a></dt><dd><dl class="simple">
<dt>method to turn it into an <a class="reference external" href="http://docs.astropy.org/en/latest/api/astropy.table.Table.html#astropy.table.Table" title="(in Astropy v3.2.dev1174)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table.Table</span></code></a>, and then call its <code class="xref py py-obj docutils literal notranslate"><span class="pre">write()</span></code></dt><dd><p>function.  Reading it back in can be done with <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry.from_table" title="ctapipe.instrument.CameraGeometry.from_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry.from_table()</span></code></a></p>
</dd>
</dl>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">geom</span> <span class="o">=</span> <span class="n">CameraGeometry</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># constructed elsewhere</span>

<span class="n">geom</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;mycam.fits.gz&#39;</span><span class="p">)</span> <span class="c1"># FITS output</span>
<span class="n">geom</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;mycam.h5&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/cameras/mycam&#39;</span><span class="p">)</span> <span class="c1"># hdf5 output</span>
<span class="n">geom</span><span class="o">.</span><span class="n">to_table</span><span class="p">()</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;mycam.ecsv&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;ascii.ecsv&#39;</span><span class="p">)</span> <span class="c1"># text table</span>

<span class="c1"># later read back in:</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">CameraGeometry</span><span class="o">.</span><span class="n">from_table</span><span class="p">(</span><span class="s1">&#39;mycam.ecsv&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;ascii.ecsv&#39;</span><span class="p">)</span>
<span class="n">geom</span> <span class="o">=</span> <span class="n">CameraGeometry</span><span class="o">.</span><span class="n">from_table</span><span class="p">(</span><span class="s1">&#39;mycam.fits.gz&#39;</span><span class="p">)</span>
<span class="n">geom</span> <span class="o">=</span> <span class="n">CameraGeometry</span><span class="o">.</span><span class="n">from_table</span><span class="p">(</span><span class="s1">&#39;mycam.h5&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/cameras/mycam&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="a-note-on-pixel-neighbors">
<h2>A note on Pixel Neighbors<a class="headerlink" href="#a-note-on-pixel-neighbors" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a> object provides two pixel-neighbor
representations: a <em>neighbor adjacency list</em> (in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">neighbors</span></code>
attribute) and a <em>pixel adjacency matrix</em> (in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">neighbor_matrix</span></code>
attribute).  The former is a list of lists, where element <em>i</em> is a
list of neighbors <em>j</em> of the <em>i*th pixel.  The latter is a 2D matrix
where row *i</em> is a boolean mask of pixels that are neighbors. It is
not necessary to load or specify either of these neighbor
representations when constructing a <a class="reference internal" href="../../api/ctapipe.instrument.CameraGeometry.html#ctapipe.instrument.CameraGeometry" title="ctapipe.instrument.CameraGeometry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CameraGeometry</span></code></a>, since they
will be computed on-the-fly if left blank, using a KD-tree
nearest-neighbor algorithm.</p>
<p>It is recommended that all algorithms that need to be computationally
fast use the <code class="xref py py-obj docutils literal notranslate"><span class="pre">neighbor_matrix</span></code> attribute, particularly in conjunction
with <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/index.html#module-numpy" title="(in NumPy v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span></code></a> operations, since it is quite speed-efficient.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ctapipe.instrument</span> <span class="kn">import</span> <span class="n">CameraGeometry</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">geom</span> <span class="o">=</span> <span class="n">CameraGeometry</span><span class="o">.</span><span class="n">from_name</span><span class="p">(</span><span class="s2">&quot;LSTCam&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">neighbor_matrix</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pixel Neighbor Matrix&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">pix_x</span><span class="p">,</span> <span class="n">geom</span><span class="o">.</span><span class="n">pix_y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pixel Positions&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../ctapipe_api/instrument/camerageometry_example.py">Source code</a>, <a class="reference external" href="../../ctapipe_api/instrument/camerageometry_example.png">png</a>, <a class="reference external" href="../../ctapipe_api/instrument/camerageometry_example.hires.png">hires.png</a>, <a class="reference external" href="../../ctapipe_api/instrument/camerageometry_example.pdf">pdf</a>)</p>
<div class="figure align-center">
<img alt="../../_images/camerageometry_example.png" src="../../_images/camerageometry_example.png" />
</div>
<p>see also <a class="reference internal" href="../../api/ctapipe.image.tailcuts_clean.html#ctapipe.image.tailcuts_clean" title="ctapipe.image.tailcuts_clean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctapipe.image.tailcuts_clean()</span></code></a> and <a class="reference internal" href="../../api/ctapipe.image.dilate.html#ctapipe.image.dilate" title="ctapipe.image.dilate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ctapipe.image.dilate()</span></code></a>
for usage examples</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="optics.html" class="btn btn-neutral float-right" title="Optics Description" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="telescope.html" class="btn btn-neutral float-left" title="Telescope Description" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright ctapipe developers.  Last updated 18 Apr 2019 13:56

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>